{% extends "base.html" %}
{% block title %}{{ league.name }} Checklist{% endblock %}

{% block head %}
<style>
  .badge-done{background:#28a745}
</style>
{% endblock %}

{% block content %}
<h1>{{ league.name }} Checklist</h1>

{% for section in ["Pre-League", "Post-League"] %}
  <h3 class="mt-4">{{ section }}</h3>
  <ul class="list-group">
    {#  loop through all tasks and show only those in this section  #}
    {% for task in league.tasks %}
      {% if task.category == section %}
        {% set done = task.id in progress %}
        <li class="list-group-item d-flex justify-content-between align-items-start">
          <div>
            {% if done %}<del>{% endif %}
            <a href="{{ url_for('leagues.league_task',
                                 league_id=request.view_args.league_id,
                                 task_id=task.id) }}">
              {{ task.title }}
            </a>
            {% if done %}</del>{% endif %}
            <small class="d-block text-muted">Due: {{ task.due }}</small>
          </div>
          {% if done %}
            <span class="badge badge-done align-self-center">âœ“</span>
          {% endif %}
        </li>
      {% endif %}
    {% endfor %}
  </ul>
{% endfor %}
{% endblock %}
