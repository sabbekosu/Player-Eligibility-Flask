{# This macro renders a Flask-WTF field with Bootstrap/Tailwind-friendly styling options #}
{% macro render_field(field, label_visible=True, html_class="", placeholder=None, extra_attrs=None) %}
    <div class="mb-4 form-group"> {# Basic grouping, you can add more specific classes #}
        {% if label_visible and field.label %}
            {{ field.label(class="block text-sm font-medium text-gray-700 mb-1") }}
        {% endif %}
        
        {# Determine the effective placeholder: use the provided value or 'omit' if None #}
        {% set effective_placeholder = placeholder if placeholder is not none else omit %}

        {# Call the field widget:
           - 'class' is always passed.
           - 'placeholder' is passed with its value or 'omit'.
           - '**extra_attrs' are unpacked only if extra_attrs is a dictionary.
        #}
        {% if extra_attrs is not none and extra_attrs is mapping %}
            {{ field(class=html_class, placeholder=effective_placeholder, **extra_attrs) }}
        {% else %}
            {{ field(class=html_class, placeholder=effective_placeholder) }}
        {% endif %}

        {% if field.errors %}
            <ul class="mt-1 text-xs text-red-600 list-none p-0">
                {% for error in field.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
        
        {% if field.description %}
            <p class="mt-1 text-xs text-gray-500">{{ field.description }}</p>
        {% endif %}
    </div>
{% endmacro %}

{# A more specific macro for rendering file fields with Tailwind styling #}
{% macro render_file_field(field, label_visible=True, help_text="") %} 
<div class="mb-4">
    {% if label_visible and field.label %}
    <label for="{{ field.id }}" class="block text-sm font-medium text-gray-700 mb-1">{{ field.label.text }}</label>
    {% endif %}
    {{ field(class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-gray-100 file:text-gray-700 hover:file:bg-gray-200") }}
    {% if help_text %}
    <p class="mt-1 text-xs text-gray-500">{{ help_text }}</p>
    {% endif %}
    {% if field.errors %}
    <ul class="mt-1 text-xs text-red-600">
        {% for error in field.errors %}
        <li>{{ error }}</li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
{% endmacro %}

{# A simple macro for submit buttons #}
{% macro render_submit_field(field, class="") %} 
    {{ field(class=class if class else "bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline") }}
{% endmacro %}
